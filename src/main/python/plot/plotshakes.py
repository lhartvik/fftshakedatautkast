import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from datetime import datetime

# Data og tilh√∏rende tidspunkter
data_points = [11.9275136580793, 11.047081116889887, 8.607121785292975, 13.117949364119063, 18.2527866027657, 9.278844003923957, 3.6856634998199285, 5.548504481707531, 3.781635090629872, 3.1560581754465544, 1.2977200493525585, 6.274777520750355, 6.254051828306628, 2.9692313712598595, 0.8958350891170872, 3.285942336976573, 3.0508395073813053, 5.2761892491288975, 47.85265019900285, 36.416710985029, 4.3620235227729385, 5.287861748801951, 5.180262330009197, 0.574479868851657, 9.785335909186358, 15.162211851990488, 6.752820369080104, 7.5557114766681295, 48.031281357371036, 2.379204335236885, 59.825777663522786, 11.399794327748243, 8.477669575933302, 9.65241946543067, 3.29035275420522, 5.1382609421293965, 11.084670758947189, 9.764401139213712, 25.500244767377318, 5.53901970659026, 6.488287642250241, 9.353488403963855, 16.20010751831385, 8.155955264784856, 6.170393020771733, 4.765478086402908, 2.5370373135315956, 11.490812822095194, 15.454259977897943, 11.499277163864694, 9.499213681575798, 10.823545261163195, 2.4035442102820603, 2.5718829852598413, 27.077640151777185, 37.45262198966768, 3.8049951798916237, 2.4923431575008066, 1.1885653502723164, 3.845881259478894, 2.4210347097591445, 4.772366794330944, 4.090386681596167, 2.6260691307293187, 5.286303524467148, 5.026803746829798, 7.148821926154889, 2.2051859040654587, 1.1407127622002307, 11.446211122704698, 11.919453784149887, 32.12019055738904, 3.1494827413128124, 4.2939955596768495, 9.3330977534618, 23.64076634431777, 8.17103849492438, 13.164265320317234, 9.298824304756126, 3.0107075620618478, 7.367329337687035, 6.260592777701147, 9.11555407330834, 6.112913311094504, 45.27496756734742, 5.066148161011434, 20.46447388636387, 5.5927838891557755, 10.889004091279446, 10.21140537616382, 11.11815030322662, 4.229256277762952, 2.2241535748348182, 23.849658918169087, 5.358257778822532, 7.355524765899109, 3.147028781174374, 7.511866914574594, 2.6639141620752347, 3.5089438507296946, 2.0773194790605087, 1.6298384833011528, 16.5725815314218, 1.9563526887757845, 12.178731565792766, 6.071732341471516, 6.606734435037053, 0.6108421508666474, 6.75012720454893, 46.47755592424672, 8.380445304307521, 14.766776654508991, 53.055533843806366, 8.892726090552912, 1.8256768340601008, 1.3335981990653283, 3.055387265059147, 5.535085343077305, 13.829071381839007, 20.69334196413811, 5.560997049314209, 5.666028592580919, 9.749073216788483, 28.000802031514432, 5.570269230267699, 2.236485522408387, 3.420611017159033, 7.709756765333603, 9.530649505781682, 3.2846865029562418]
frequencies = [7.0, 4.799999999999999, 5.6, 5.7, 6.2, 4.5, 4.2, 4.8999999999999995, 5.7, 5.1, 7.6, 4.9, 10.799999999999999, 4.8999999999999995, 9.4, 2.3999999999999995, 11.5, 9.4, 4.7, 9.799999999999999, 5.6, 5.7, 5.2, 3.8000000000000003, 4.5, 3.2, 10.299999999999999, 4.6, 7.0, 4.8, 5.5, 4.1, 5.300000000000001, 9.4, 7.799999999999999, 10.4, 4.7, 5.3999999999999995, 6.8, 9.7, 4.8, 9.5, 3.6999999999999997, 5.800000000000001, 10.5, 10.799999999999999, 7.799999999999999, 5.5, 14.099999999999998, 6.2, 5.4, 10.0, 8.9, 6.7, 4.5, 9.4, 1.5999999999999999, 5.4, 4.8, 4.7, 10.1, 4.2, 5.6000000000000005, 5.1000000000000005, 4.8999999999999995, 5.9, 5.8, 3.7, 8.3, 6.0, 5.6000000000000005, 10.5, 5.800000000000001, 2.1999999999999997, 4.8, 6.0, 5.800000000000001, 9.4, 5.7, 9.5, 5.299999999999999, 4.3999999999999995, 9.2, 4.800000000000001, 6.0, 3.6, 5.800000000000001, 7.2, 8.200000000000001, 7.300000000000001, 6.7, 4.6000000000000005, 5.2, 9.599999999999998, 4.8, 9.0, 9.0, 10.0, 4.8999999999999995, 5.2, 8.5, 8.8, 4.699999999999999, 5.5, 6.6, 4.2, 4.9, 4.6, 6.6000000000000005, 6.7, 4.3, 6.7, 5.1, 4.6000000000000005, 10.5, 5.2, 7.6, 5.0, 6.2, 6.199999999999999, 8.7, 4.0, 9.2, 6.9, 6.0, 6.800000000000001, 3.7, 5.800000000000001, 5.6000000000000005, 9.200000000000001]
time_stamps = ['2023-04-11T07:51:38.309Z', '2023-04-11T13:41:48.918Z', '2023-04-25T20:01:46.030Z', '2023-04-26T10:48:40.444Z', '2023-04-26T14:26:14.448Z', '2023-04-26T15:47:51.783Z', '2023-04-26T17:01:10.539Z', '2023-04-26T18:32:25.225Z', '2023-04-26T18:46:26.713Z', '2023-04-27T05:59:24.972Z', '2023-04-11T14:31:42.345Z', '2023-04-11T16:06:57.368Z', '2023-04-11T18:54:51.573Z', '2023-04-15T18:46:18.566Z', '2023-04-15T19:56:39.972Z', '2023-04-15T21:41:48.777Z', '2023-04-16T08:25:56.463Z', '2023-05-05T07:44:58.135Z', '2023-05-05T09:03:26.162Z', '2023-05-05T10:41:39.414Z', '2023-05-05T11:15:09.365Z', '2023-05-05T11:53:26.239Z', '2023-05-05T14:29:20.948Z', '2023-04-11T05:16:34.396Z', '2023-04-19T08:05:57.051Z', '2023-04-16T09:05:50.922Z', '2023-04-16T10:59:12.130Z', '2023-04-16T17:05:46.063Z', '2023-04-16T22:00:08.190Z', '2023-04-16T22:39:36.393Z', '2023-04-11T05:47:52.054Z', '2023-04-14T05:37:29.223Z', '2023-04-14T08:05:43.548Z', '2023-04-14T11:29:16.701Z', '2023-04-14T15:14:07.204Z', '2023-04-14T16:06:10.846Z', '2023-04-27T09:35:13.410Z', '2023-04-27T11:30:08.846Z', '2023-04-27T16:22:50.865Z', '2023-04-27T17:03:07.556Z', '2023-04-27T22:42:48.520Z', '2023-04-17T05:56:21.400Z', '2023-04-17T07:22:48.402Z', '2023-04-17T14:00:50.981Z', '2023-04-17T17:17:04.244Z', '2023-04-17T18:00:15.046Z', '2023-04-17T19:44:31.218Z', '2023-04-18T06:00:13.525Z', '2023-04-18T06:14:35.464Z', '2023-04-18T13:03:57.658Z', '2023-04-18T13:45:56.832Z', '2023-04-18T16:22:33.396Z', '2023-04-18T19:16:05.605Z', '2023-04-19T07:50:36.422Z', '2023-04-30T16:26:37.518Z', '2023-04-30T17:26:03.756Z', '2023-04-30T19:51:00.129Z', '2023-04-30T21:55:31.169Z', '2023-05-01T06:27:00.105Z', '2023-05-01T10:17:23.257Z', '2023-05-01T12:17:21.284Z', '2023-05-02T06:03:18.323Z', '2023-05-02T18:54:24.009Z', '2023-05-02T19:51:53.197Z', '2023-05-03T06:23:29.543Z', '2023-05-03T07:32:08.664Z', '2023-05-04T08:47:57.649Z', '2023-05-04T10:09:57.856Z', '2023-04-12T19:44:30.622Z', '2023-04-13T05:22:47.648Z', '2023-04-13T07:55:58.229Z', '2023-04-13T16:34:02.574Z', '2023-04-13T17:42:08.297Z', '2023-04-13T19:46:11.497Z', '2023-04-15T07:23:49.078Z', '2023-04-15T11:22:41.078Z', '2023-04-15T14:05:46.636Z', '2023-04-15T15:25:07.556Z', '2023-04-15T16:21:10.910Z', '2023-05-05T19:04:50.654Z', '2023-05-05T19:21:26.568Z', '2023-05-07T08:39:42.847Z', '2023-05-07T08:49:06.751Z', '2023-05-07T09:35:01.402Z', '2023-05-07T11:05:22.441Z', '2023-05-07T12:07:02.116Z', '2023-05-07T12:34:37.630Z', '2023-05-07T13:08:07.592Z', '2023-05-07T13:44:30.219Z', '2023-05-07T15:39:41.020Z', '2023-05-07T18:08:19.838Z', '2023-05-09T06:59:16.708Z', '2023-04-19T13:14:05.041Z', '2023-04-19T14:50:37.903Z', '2023-04-20T09:14:51.885Z', '2023-04-20T14:50:49.317Z', '2023-04-21T07:52:45.623Z', '2023-04-22T15:47:59.851Z', '2023-04-22T19:17:16.868Z', '2023-04-28T05:33:44.968Z', '2023-04-28T07:51:53.690Z', '2023-04-28T10:07:21.165Z', '2023-04-28T11:08:57.040Z', '2023-04-28T20:25:07.475Z', '2023-04-29T08:05:57.299Z', '2023-04-29T13:19:03.704Z', '2023-04-30T08:36:51.544Z', '2023-04-12T05:12:30.656Z', '2023-04-12T05:50:43.001Z', '2023-04-12T08:16:54.101Z', '2023-04-12T09:37:54.197Z', '2023-04-12T10:50:29.500Z', '2023-04-12T13:15:50.442Z', '2023-04-12T13:45:19.410Z', '2023-04-12T15:22:00.036Z', '2023-04-12T18:53:20.266Z', '2023-04-22T20:05:37.503Z', '2023-04-23T09:28:48.850Z', '2023-04-23T12:33:41.534Z', '2023-04-23T19:08:16.918Z', '2023-04-23T21:01:58.617Z', '2023-04-24T05:49:59.885Z', '2023-04-24T06:34:40.418Z', '2023-04-24T10:01:38.188Z', '2023-04-24T15:32:23.926Z', '2023-04-24T19:23:13.213Z', '2023-04-25T05:31:44.972Z', '2023-04-25T10:01:26.947Z', '2023-04-25T10:58:29.885Z', '2023-04-25T14:22:45.644Z']
noiseTimes = ['2023-04-11T05:16:34.396Z', '2023-04-11T05:47:52.054Z', '2023-04-11T07:51:38.309Z', '2023-04-11T13:41:48.918Z', '2023-04-11T14:31:42.345Z', '2023-04-11T16:06:57.368Z', '2023-04-11T18:54:51.573Z', '2023-04-12T05:12:30.656Z', '2023-04-12T05:50:43.001Z', '2023-04-12T08:16:54.101Z', '2023-04-12T09:37:54.197Z', '2023-04-12T10:50:29.500Z', '2023-04-12T13:15:50.442Z', '2023-04-12T13:45:19.410Z', '2023-04-12T15:22:00.036Z', '2023-04-12T18:53:20.266Z', '2023-04-12T19:44:30.622Z', '2023-04-13T05:22:47.648Z', '2023-04-13T07:55:58.229Z', '2023-04-13T16:34:02.574Z', '2023-04-13T17:42:08.297Z', '2023-04-13T19:46:11.497Z', '2023-04-14T05:37:29.223Z', '2023-04-14T08:05:43.548Z', '2023-04-14T11:29:16.701Z', '2023-04-14T15:14:07.204Z', '2023-04-14T16:06:10.846Z', '2023-04-15T07:23:49.078Z', '2023-04-15T11:22:41.078Z', '2023-04-15T14:05:46.636Z', '2023-04-15T15:25:07.556Z', '2023-04-15T16:21:10.910Z', '2023-04-15T18:46:18.566Z', '2023-04-15T19:56:39.972Z', '2023-04-15T21:41:48.777Z', '2023-04-16T08:25:56.463Z', '2023-04-16T09:05:50.922Z', '2023-04-16T10:59:12.130Z', '2023-04-16T17:05:46.063Z', '2023-04-16T22:00:08.190Z', '2023-04-16T22:39:36.393Z', '2023-04-17T05:56:21.400Z', '2023-04-17T07:22:48.402Z', '2023-04-17T14:00:50.981Z', '2023-04-17T17:17:04.244Z', '2023-04-17T18:00:15.046Z', '2023-04-17T19:44:31.218Z', '2023-04-18T06:00:13.525Z', '2023-04-18T06:14:35.464Z', '2023-04-18T13:03:57.658Z', '2023-04-18T13:45:56.832Z', '2023-04-18T16:22:33.396Z', '2023-04-18T19:16:05.605Z', '2023-04-19T07:50:36.422Z', '2023-04-19T08:05:57.051Z', '2023-04-19T13:14:05.041Z', '2023-04-19T14:50:37.903Z', '2023-04-20T09:14:51.885Z', '2023-04-20T14:50:49.317Z', '2023-04-21T07:52:45.623Z', '2023-04-22T15:47:59.851Z', '2023-04-22T19:17:16.868Z', '2023-04-22T20:05:37.503Z', '2023-04-23T09:28:48.850Z', '2023-04-23T12:33:41.534Z', '2023-04-23T19:08:16.918Z', '2023-04-23T21:01:58.617Z', '2023-04-24T05:49:59.885Z', '2023-04-24T06:34:40.418Z', '2023-04-24T10:01:38.188Z', '2023-04-24T15:32:23.926Z', '2023-04-24T19:23:13.213Z', '2023-04-25T05:31:44.972Z', '2023-04-25T10:01:26.947Z', '2023-04-25T10:58:29.885Z', '2023-04-25T14:22:45.644Z', '2023-04-25T20:01:46.030Z', '2023-04-26T10:48:40.444Z', '2023-04-26T14:26:14.448Z', '2023-04-26T15:47:51.783Z', '2023-04-26T17:01:10.539Z', '2023-04-26T18:32:25.225Z', '2023-04-26T18:46:26.713Z', '2023-04-27T05:59:24.972Z', '2023-04-27T09:35:13.410Z', '2023-04-27T11:30:08.846Z', '2023-04-27T16:22:50.865Z', '2023-04-27T17:03:07.556Z', '2023-04-27T22:42:48.520Z', '2023-04-28T05:33:44.968Z', '2023-04-28T07:51:53.690Z', '2023-04-28T10:07:21.165Z', '2023-04-28T11:08:57.040Z', '2023-04-28T20:25:07.475Z', '2023-04-29T08:05:57.299Z', '2023-04-29T13:19:03.704Z', '2023-04-30T08:36:51.544Z', '2023-04-30T16:26:37.518Z', '2023-04-30T17:26:03.756Z', '2023-04-30T19:51:00.129Z', '2023-04-30T21:55:31.169Z', '2023-05-01T06:27:00.105Z', '2023-05-01T10:17:23.257Z', '2023-05-01T12:17:21.284Z', '2023-05-02T06:03:18.323Z', '2023-05-02T18:54:24.009Z', '2023-05-02T19:51:53.197Z', '2023-05-03T06:23:29.543Z', '2023-05-03T07:32:08.664Z', '2023-05-04T08:47:57.649Z', '2023-05-04T10:09:57.856Z', '2023-05-05T07:44:58.135Z', '2023-05-05T09:03:26.162Z', '2023-05-05T10:41:39.414Z', '2023-05-05T11:15:09.365Z', '2023-05-05T11:53:26.239Z', '2023-05-05T14:29:20.948Z', '2023-05-05T19:04:50.654Z', '2023-05-05T19:21:26.568Z', '2023-05-07T08:39:42.847Z', '2023-05-07T08:49:06.751Z', '2023-05-07T09:35:01.402Z', '2023-05-07T11:05:22.441Z', '2023-05-07T12:07:02.116Z', '2023-05-07T12:34:37.630Z', '2023-05-07T13:08:07.592Z', '2023-05-07T13:44:30.219Z', '2023-05-07T15:39:41.020Z', '2023-05-07T18:08:19.838Z', '2023-05-09T06:59:16.708Z']
noise = [8.018601911350842, 48.68582127840121, 28.427816979013397, 36.97624045188644, 19.128748303417137, 22.337991907031533, 23.857865823504095, 10.76234764837824, 29.480370455284973, 46.15507256216982, 36.18009243926294, 36.220723098445774, 59.82577766352279, 24.220677610851475, 15.860161198083583, 12.643084396040305, 11.475753099582754, 28.793112084957905, 42.76816734963334, 46.727309212208176, 14.879638222536515, 21.609628599500073, 26.365134832419482, 22.20664411320539, 26.13723413302862, 15.643090630766409, 22.5343660296488, 26.329725676875068, 30.05975960915492, 18.07788583477458, 37.28469520019932, 34.1207314824238, 19.522784583125894, 12.33998348829634, 13.118957633542333, 19.204090312969747, 30.77927783637495, 21.333019323312232, 32.52956120125954, 27.05838451290682, 12.939193600580982, 28.442060365917524, 44.28240156211804, 28.16178358000323, 25.021570040962537, 19.769992296828487, 20.99748894513896, 28.327764434556208, 29.89569871399598, 32.661380210436164, 23.955912377484896, 23.201298920163133, 14.475439965008023, 12.56096604667438, 31.13826945757865, 15.172884538088953, 38.834582415995236, 23.162159509874677, 21.52072326290327, 21.86332778497867, 21.166853603180975, 15.297077862605466, 14.29838494740997, 19.450326747792673, 24.858764394143492, 44.63349334783592, 20.24182366138981, 24.434573798081335, 39.4772793160691, 52.025904573340995, 20.845219804149156, 15.825543915672732, 18.841255252249447, 20.243602563058445, 19.946154019775406, 22.121278891247897, 27.26350581648247, 36.10192402664148, 35.013166656645076, 27.060451760166966, 15.102249791165946, 27.364657008052397, 18.98072461894091, 17.844611701249526, 29.655348663370585, 22.935035466816377, 44.335736245064886, 22.05959263840046, 23.07297096810829, 13.04224541533003, 14.155937435153652, 13.187113208883833, 40.49586386906071, 15.211617760637385, 28.362388964702614, 18.47459880815605, 24.93755185989352, 50.40048958505909, 52.878915906708635, 21.13686171828995, 13.318899054082115, 7.505387884893732, 20.46350495475682, 13.106912074820414, 18.596238555532672, 18.15481067223834, 15.220888894513989, 22.102333969960448, 16.68664694930387, 19.949235926094662, 14.619516699232296, 25.007392637454632, 53.332830613862896, 45.79360652536365, 19.75776468848397, 17.160860612462013, 27.41236414327905, 16.212181090219097, 17.996588562632517, 19.192322462180574, 22.49460223391009, 21.134910144615567, 46.71749143082743, 38.40249807080136, 36.552886885654296, 21.417377733579283, 25.54577694397031, 28.5530656581327, 26.610371174268113, 21.622285964790454]
pill_times = ['2023-04-11T05:47:53.586Z', '2023-04-28T05:46:19.067Z', '2023-04-28T07:51:55.015Z', '2023-04-28T10:07:21.976Z', '2023-04-29T08:06:07.100Z', '2023-04-13T05:23:07.474Z', '2023-04-13T07:55:44.415Z', '2023-04-13T16:34:03.896Z', '2023-04-13T19:11:00.517Z', '2023-04-21T07:52:47.030Z', '2023-04-27T06:07:25.623Z', '2023-04-27T09:35:26.292Z', '2023-04-27T11:30:09.977Z', '2023-04-27T17:03:35.189Z', '2023-04-11T07:51:39.554Z', '2023-04-11T13:41:36.326Z', '2023-04-30T18:25:35.393Z', '2023-04-30T21:55:45.821Z', '2023-05-02T18:54:25.852Z', '2023-05-02T18:54:26.195Z', '2023-04-17T07:22:49.533Z', '2023-04-17T14:00:56.279Z', '2023-04-17T14:01:55.172Z', '2023-04-17T18:01:50.235Z', '2023-04-18T06:00:15.764Z', '2023-04-24T05:51:01.059Z', '2023-04-24T07:10:05.689Z', '2023-04-24T15:32:02.070Z', '2023-04-24T19:27:41.268Z', '2023-04-25T05:34:37.779Z', '2023-04-25T10:00:24.562Z', '2023-04-25T14:15:24.562Z', '2023-04-25T19:27:10.620Z', '2023-04-26T15:47:37.601Z', '2023-04-26T18:46:50.822Z', '2023-04-11T16:06:43.143Z', '2023-04-11T18:54:52.861Z', '2023-05-03T07:32:02.230Z', '2023-05-03T07:32:02.444Z', '2023-05-05T09:03:13.810Z', '2023-05-05T09:03:14.082Z', '2023-05-05T11:53:12.334Z', '2023-05-05T14:40:08.900Z', '2023-04-14T05:48:14.670Z', '2023-04-14T08:06:02.480Z', '2023-04-14T11:29:57.282Z', '2023-04-14T15:14:22.450Z', '2023-04-12T05:50:45.226Z', '2023-04-12T08:17:04.110Z', '2023-04-12T09:37:36.831Z', '2023-04-12T13:45:05.082Z', '2023-04-12T18:53:22.132Z', '2023-04-16T09:06:13.198Z', '2023-04-16T10:59:13.558Z', '2023-04-16T17:05:46.844Z', '2023-04-16T22:00:09.120Z', '2023-05-05T19:05:01.058Z', '2023-05-09T06:59:59.201Z', '2023-04-15T07:24:25.841Z', '2023-04-15T15:25:08.682Z', '2023-04-15T18:46:30.558Z', '2023-04-15T21:42:48.617Z']

# Konverter tidspunktene til datetime-objekter
time_stamps = [datetime.fromisoformat(t[:-1]) for t in time_stamps]
noiseTimes = [datetime.fromisoformat(t[:-1]) for t in noiseTimes]
pill_times = [datetime.fromisoformat(t[:-1]) for t in pill_times]

# Lag x- og y-verdier
x_values = time_stamps
y_values = data_points
noise_x = noiseTimes
noise_values = noise

# Lag plottet
fig, ax = plt.subplots()
ax.plot_date(noiseTimes, noise, linestyle='solid', marker='None')
ax.plot_date(x_values, y_values)

for i, txt in enumerate(frequencies):
    ax.annotate(str(round(txt,1)) + " Hz", (time_stamps[i], data_points[i]))


# Legg til vertikale linjer for hver av de spesifikke tidspunktene:
for time_stamp in pill_times:
    ax.axvline(x=time_stamp, color='r', linestyle='--')

# Konfigurer aksetiketter og formatering:
ax.xaxis.set_major_locator(mdates.AutoDateLocator())
ax.xaxis.set_major_formatter(mdates.DateFormatter('%Y-%m-%d'))
plt.xticks(rotation=45)

# Vis plottet
plt.show()
