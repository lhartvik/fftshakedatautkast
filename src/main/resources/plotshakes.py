import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from datetime import datetime

# Data og tilh√∏rende tidspunkter
data_points = [0.08827680181146311, 0.535982287627708, 0.31296188451961066, 0.4070714927852423, 0.2105884219656496, 0.24591899014860708, 0.2626512846291368, 0.11848270320504045, 0.32454944749480513, 0.5081212707912036, 0.3983066979868539, 0.3987540009815412, 0.6586220860451424, 0.2666454802009596, 0.17460454107332266, 0.13918773719580138, 0.1263365850068107, 0.3169834189500097, 0.47083482565940804, 0.5144210250255651, 0.16380996200070067, 0.2379004372815943, 0.29025381332865174, 0.24447298206737908, 0.28774485414907924, 0.1722148108358065, 0.24808087319191482, 0.28986399387622563, 0.33092794365577394, 0.19901947529626246, 0.41046727162370494, 0.3756351897794427, 0.21492636802593937, 0.13585089879708845, 0.1444266264608839, 0.2114178622744319, 0.33884912101889075, 0.23485524529885216, 0.3581179935011498, 0.2978858002169909, 0.1424476039222921, 0.3131186899897862, 0.48750503262933226, 0.3100331223863507, 0.27546250629937885, 0.21764787815826026, 0.2311613908061134, 0.31186040589086406, 0.3291217969874307, 0.3595691891929569, 0.2637306793053843, 0.2554231384955632, 0.15936014270965043, 0.13828369615071615, 0.3428012603752685, 0.16703831117754656, 0.4275299825665265, 0.2549922526624405, 0.23692167828276836, 0.2406934120375204, 0.23302592660887933, 0.16840555569421617, 0.1574109437257099, 0.21412867959594714, 0.2736701786621024, 0.4913702026836752, 0.22284227043739946, 0.2690002636828019, 0.4346054338110072, 0.5727532701906156, 0.22948505957907855, 0.17422343935354426, 0.20742341048600782, 0.22286185436883546, 0.21958724285989703, 0.24353319619651975]
time_stamps = ['2023-04-11T07:51:38.309Z', '2023-04-11T13:41:48.918Z', '2023-04-11T14:31:42.345Z', '2023-04-11T16:06:57.368Z', '2023-04-11T18:54:51.573Z', '2023-04-15T18:46:18.566Z', '2023-04-15T19:56:39.972Z', '2023-04-15T21:41:48.777Z', '2023-04-16T08:25:56.463Z', '2023-04-11T05:16:34.396Z', '2023-04-19T08:05:57.051Z', '2023-04-16T09:05:50.922Z', '2023-04-16T10:59:12.130Z', '2023-04-16T17:05:46.063Z', '2023-04-16T22:00:08.190Z', '2023-04-16T22:39:36.393Z', '2023-04-11T05:47:52.054Z', '2023-04-14T05:37:29.223Z', '2023-04-14T08:05:43.548Z', '2023-04-14T11:29:16.701Z', '2023-04-14T15:14:07.204Z', '2023-04-14T16:06:10.846Z', '2023-04-17T05:56:21.400Z', '2023-04-17T07:22:48.402Z', '2023-04-17T14:00:50.981Z', '2023-04-17T17:17:04.244Z', '2023-04-17T18:00:15.046Z', '2023-04-17T19:44:31.218Z', '2023-04-18T06:00:13.525Z', '2023-04-18T06:14:35.464Z', '2023-04-18T13:03:57.658Z', '2023-04-18T13:45:56.832Z', '2023-04-18T16:22:33.396Z', '2023-04-18T19:16:05.605Z', '2023-04-19T07:50:36.422Z', '2023-04-12T19:44:30.622Z', '2023-04-13T05:22:47.648Z', '2023-04-13T07:55:58.229Z', '2023-04-13T16:34:02.574Z', '2023-04-13T17:42:08.297Z', '2023-04-13T19:46:11.497Z', '2023-04-15T07:23:49.078Z', '2023-04-15T11:22:41.078Z', '2023-04-15T14:05:46.636Z', '2023-04-15T15:25:07.556Z', '2023-04-15T16:21:10.910Z', '2023-04-19T13:14:05.041Z', '2023-04-19T14:50:37.903Z', '2023-04-20T09:14:51.885Z', '2023-04-20T14:50:49.317Z', '2023-04-21T07:52:45.623Z', '2023-04-22T15:47:59.851Z', '2023-04-22T19:17:16.868Z', '2023-04-12T05:12:30.656Z', '2023-04-12T05:50:43.001Z', '2023-04-12T08:16:54.101Z', '2023-04-12T09:37:54.197Z', '2023-04-12T10:50:29.500Z', '2023-04-12T13:15:50.442Z', '2023-04-12T13:45:19.410Z', '2023-04-12T15:22:00.036Z', '2023-04-12T18:53:20.266Z', '2023-04-22T20:05:37.503Z', '2023-04-23T09:28:48.850Z', '2023-04-23T12:33:41.534Z', '2023-04-23T19:08:16.918Z', '2023-04-23T21:01:58.617Z', '2023-04-24T05:49:59.885Z', '2023-04-24T06:34:40.418Z', '2023-04-24T10:01:38.188Z', '2023-04-24T15:32:23.926Z', '2023-04-24T19:23:13.213Z', '2023-04-25T05:31:44.972Z', '2023-04-25T10:01:26.947Z', '2023-04-25T10:58:29.885Z', '2023-04-25T14:22:45.644Z']
pill_times = ['2023-04-11T05:47:53.586Z', '2023-04-11T16:06:43.143Z', '2023-04-11T18:54:52.861Z', '2023-04-13T05:23:07.474Z', '2023-04-13T07:55:44.415Z', '2023-04-13T16:34:03.896Z', '2023-04-13T19:11:00.517Z', '2023-04-14T05:48:14.670Z', '2023-04-14T08:06:02.480Z', '2023-04-14T11:29:57.282Z', '2023-04-14T15:14:22.450Z', '2023-04-21T07:52:47.030Z', '2023-04-12T05:50:45.226Z', '2023-04-12T08:17:04.110Z', '2023-04-12T09:37:36.831Z', '2023-04-12T13:45:05.082Z', '2023-04-12T18:53:22.132Z', '2023-04-11T07:51:39.554Z', '2023-04-11T13:41:36.326Z', '2023-04-16T09:06:13.198Z', '2023-04-16T10:59:13.558Z', '2023-04-16T17:05:46.844Z', '2023-04-16T22:00:09.120Z', '2023-04-17T07:22:49.533Z', '2023-04-17T14:00:56.279Z', '2023-04-17T14:01:55.172Z', '2023-04-17T18:01:50.235Z', '2023-04-18T06:00:15.764Z', '2023-04-24T05:51:01.059Z', '2023-04-24T07:10:05.689Z', '2023-04-24T15:32:02.070Z', '2023-04-24T19:27:41.268Z', '2023-04-25T05:34:37.779Z', '2023-04-25T10:00:24.562Z', '2023-04-25T14:15:24.562Z', '2023-04-15T07:24:25.841Z', '2023-04-15T15:25:08.682Z', '2023-04-15T18:46:30.558Z', '2023-04-15T21:42:48.617Z']
# Konverter tidspunktene til datetime-objekter
time_stamps = [datetime.fromisoformat(t[:-1]) for t in time_stamps]
pill_times = [datetime.fromisoformat(t[:-1]) for t in pill_times]


# Lag x- og y-verdier
x_values = time_stamps
y_values = data_points

# Lag plottet
fig, ax = plt.subplots()
ax.plot_date(x_values, y_values)

# Legg til vertikale linjer for hver av de spesifikke tidspunktene:
for time_stamp in pill_times:
    ax.axvline(x=time_stamp, color='r', linestyle='--')

# Konfigurer aksetiketter og formatering:
ax.xaxis.set_major_locator(mdates.AutoDateLocator())
ax.xaxis.set_major_formatter(mdates.DateFormatter('%Y-%m-%d'))
plt.xticks(rotation=45)

# Vis plottet
plt.show()